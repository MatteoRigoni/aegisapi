@using MudBlazor
@using Microsoft.AspNetCore.Components
@using Microsoft.AspNetCore.Components.Web

@inject NavigationManager Nav
@inject IIncidentService IncidentService

<MudDialogContent>
    <MudTextField @bind-Value="searchText"
                  Placeholder="Search..."
                  Immediate="true"
                  AutoFocus="true"
                  OnKeyDown="HandleInputKey" />

    <!-- Indica il tipo T della lista -->
    <MudList T="Incident" Dense="true">
        @foreach (var item in FilteredItems)
        {
            <!-- Indica T anche sull'item; usa l'evento OnClick del componente -->
            <MudListItem T="Incident"
                         Value="@item"
                         OnClick="@(_ => Select(item))">
                @item.Title
            </MudListItem>
        }
    </MudList>
</MudDialogContent>

@code {
    [CascadingParameter]
    private IMudDialogInstance MudDialog { get; set; } = default!; // v8

    private string? searchText;

    // Esempio: adatta ai tuoi tipi/dati
    private IEnumerable<Incident> FilteredItems { get; set; } = Enumerable.Empty<Incident>();

    private void Select(Incident item)
    {
        // la tua logica
        MudDialog.Close(DialogResult.Ok(item));
    }

    private void HandleInputKey(KeyboardEventArgs e)
    {
        if (e.Key == "Enter" && FilteredItems.Any())
            Select(FilteredItems.First());
    }
}