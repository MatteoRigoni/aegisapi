{
  "Resilience": {
    "Timeout": {
      "DurationSeconds": 2
    },
    "Retry": {
      "Count": 2,
      "BaseDelayMs": 100
    },
    "CircuitBreaker": {
      "FailureThreshold": 5,
      "BreakDurationSeconds": 5
    }
  },
  "ReverseProxy": {
    "Routes": {
      "api": {
        "ClusterId": "backend",
        "Match": { "Path": "/api/{**catch-all}" },
        "Transforms": [
          { "PathRemovePrefix": "/api" },
          { "RequestHeadersCopy": "true" },
          { "ResponseHeadersCopy": "true" }
        ]
      }
    },
    "Clusters": {
      "backend": {
        "LoadBalancingPolicy": "PowerOfTwoChoices",
        "SessionAffinity": { "AffinityKeyName": "gw_", "Enabled": false },
        "Destinations": {
          "d1": { "Address": "http://localhost:5005/" }
        }
      }
    }
  },
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  },
  "AllowedHosts": "*"
}
