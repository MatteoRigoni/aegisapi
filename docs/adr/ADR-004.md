# ADR-004: Platform â€” AKS vs ACA (Choose AKS)

## Context
We need multi-service deployment, sidecars (OPA, OTel), custom networking (mTLS, NetworkPolicies), and advanced autoscaling.

## Decision
Deploy the gateway and control-plane components on **AKS**. Use **Helm** for packaging, **KEDA** for event-driven scale, **Azure CNI** for granular policies. ACA may be used for bursty stateless analytics, but not for the gateway.

## Alternatives
- **ACA** only: simpler ops, but limited sidecars/DaemonSets/advanced networking.
- Managed API gateways.

## Consequences
- Higher ops overhead vs ACA, but maximum control and security posture.

## Security Impact
- Namespaces, PodSecurity, NetworkPolicies, Azure Workload Identity, Secret Store CSI with Key Vault.
- Node pool isolation for gateway.

## Assumptions
- Team can operate AKS; IaC via Bicep/Terraform; GitHub Actions for delivery.

## Trade-offs
- More components to manage; improved isolation, performance, and extensibility.

## Acceptance Criteria
- Blue/Green or Canary supported via Helm and label-based routing.
- PodSecurity admission enforces **restricted** baseline.
- k6 soak test confirms autoscaling maintains SLOs.
