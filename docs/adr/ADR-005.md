# ADR-005: Observability â€” OpenTelemetry

## Context
Uniform telemetry across gateway and services for traces, metrics, and logs with vendor-neutral export.

## Decision
Instrument gateway and services with **OpenTelemetry SDK**. Run **OTel Collector** as a **DaemonSet**. Export via **OTLP** to **Azure Monitor/Application Insights**, **Log Analytics**, and optional **Jaeger/Tempo**. Use tail-based sampling and semantic conventions (HTTP, RPC, DB).

## Alternatives
- Proprietary APM agents.
- Logs-only monitoring.

## Consequences
- Consistent cross-stack visibility; some added CPU/memory for collection.

## Security Impact
- PII scrubbing at source; attribute allow-lists; encryption in transit; access via RBAC.

## Assumptions
- Azure Monitor / Log Analytics enabled; retention aligned to compliance.

## Trade-offs
- Tail sampling costs vs lower noise and better signal.

## Acceptance Criteria
- Gateway emits **server spans** with route, status, rate-limit decisions, OPA outcomes.
- Error budgets and SLO dashboards available; alerts on p95 latency, 5xx, and 403 spikes.
